# 🔐 KPSY LAB 관리자 가이드

**버전**: 1.0  
**최종 업데이트**: 2026-01-06

---

## 목차

1. [관리자 계정](#관리자-계정)
2. [대시보드 사용법](#대시보드-사용법)
3. [시스템 모니터링](#시스템-모니터링)
4. [에러 관리](#에러-관리)
5. [성능 모니터링](#성능-모니터링)
6. [문제 해결](#문제-해결)

---

## 관리자 계정

### 마스터 계정

마스터 계정은 시스템 관리 및 모니터링을 위한 특별한 권한을 가진 계정입니다.

### 관리자 대시보드 접근

1. 마스터 계정으로 로그인
2. 우측 상단 사용자 메뉴에서 **"관리자 대시보드"** 클릭
3. 또는 직접 `/admin/dashboard` 접근

---

## 대시보드 사용법

### 주요 통계

대시보드 메인 화면에서 다음 정보를 확인할 수 있습니다:

- **누적 접속자 수**: 전체 방문자 수
- **당일 접속자 수**: 오늘 방문한 사용자 수
- **총 사용자 수**: 등록된 사용자 수
- **블로그 포스트**: 작성된 블로그 포스트 수

### 애널리틱스 분석

#### 종합 분석 엔진

자동으로 수집된 데이터를 분석하여 다음을 제공합니다:

- **성장률**: 사용자 증가율
- **참여도**: 서비스 이용 참여율
- **재방문율**: 사용자 재방문 비율

#### 인사이트 카드

우선순위별로 분류된 인사이트:

- **높음**: 즉시 조치 필요
- **중간**: 단기 조치 필요
- **낮음**: 참고 사항

#### 전략적 권장사항

서비스 개선을 위한 구체적인 권장사항이 제시됩니다.

### 인기 콘텐츠

- **가장 많이 사용된 서비스**: 서비스별 사용 횟수
- **가장 많이 본 블로그 포스트**: 조회수 기준
- **트래픽 소스**: 유입 경로 분석
- **디바이스 유형**: 모바일/데스크톱 사용 비율

---

## 시스템 모니터링

### 시스템 상태 확인

관리자 대시보드의 **"시스템 상태"** 섹션에서 확인 가능:

#### 상태 표시

- **정상 (Green)**: 모든 시스템이 정상 작동
- **주의 (Yellow)**: 일부 메트릭이 임계값에 근접
- **위험 (Red)**: 즉시 조치가 필요한 문제

#### 주요 메트릭

1. **CPU 사용률**
   - 현재 CPU 사용률
   - 임계값: 90% (위험), 75% (주의)

2. **메모리 사용량**
   - 힙 메모리 사용률
   - 사용/여유 공간 표시
   - 임계값: 90% (위험), 75% (주의)

3. **요청 성공률**
   - 전체 요청 대비 성공률
   - 임계값: 90% 미만 (주의)

4. **디스크 공간**
   - 디스크 사용률
   - 임계값: 90% (위험), 80% (주의)

5. **시스템 업타임**
   - 서버 가동 시간

#### 자동 갱신

- 기본 30초마다 자동 갱신
- 수동 새로고침 버튼으로 즉시 갱신 가능

---

## 에러 관리

### 에러 로그 모니터링

**"에러 로그"** 섹션에서 확인 가능:

#### 에러 요약

- **전체 에러**: 누적 에러 수
- **Critical**: 치명적 에러 수
- **Error**: 일반 에러 수
- **Warning**: 경고 수

#### 필터링

- 전체 / Critical / Error / Warning / 미해결 에러 필터링 가능

#### 에러 상세 정보

각 에러는 다음 정보를 포함:

- **타임스탬프**: 에러 발생 시간
- **레벨**: Critical / Error / Warning
- **메시지**: 에러 메시지
- **컨텍스트**: 추가 정보 (있는 경우)
- **스택 트레이스**: 에러 발생 위치 (있는 경우)

#### 에러 해결

1. 에러 로그에서 해결된 에러 확인
2. **"해결"** 버튼 클릭하여 해결 표시
3. 해결된 에러는 회색으로 표시

#### 7일 트렌드

에러 발생 추이를 그래프로 확인 가능

---

## 성능 모니터링

### 성능 메트릭

**"성능 메트릭"** 섹션에서 확인 가능:

#### 평균 응답 시간

- **API 평균**: API 호출 평균 응답 시간
- **페이지 로드**: 페이지 로딩 평균 시간
- **데이터베이스**: DB 쿼리 평균 시간
- **렌더링**: 렌더링 평균 시간

각 메트릭에는 P95, P99 백분위수도 표시됩니다.

#### 가장 느린 요청

상위 10개의 가장 느린 요청을 확인할 수 있습니다:
- 요청 타입
- 요청 이름
- 응답 시간
- 에러 여부

#### 응답 시간 트렌드

시간대별 평균 응답 시간과 요청 수를 테이블로 확인

#### 시간 범위 선택

- 1시간
- 24시간
- 7일

---

## 문제 해결

### 일반적인 문제

#### 시스템 상태가 "위험"으로 표시되는 경우

1. 해당 메트릭 확인 (CPU, 메모리, 디스크)
2. 문제의 원인 파악
3. 필요시:
   - 서버 재시작
   - 리소스 확장
   - 불필요한 프로세스 종료

#### 에러율이 높은 경우

1. 에러 로그 확인
2. 반복되는 에러 패턴 파악
3. 최근 변경사항 확인
4. 필요시 롤백 검토

#### 성능 저하가 있는 경우

1. 성능 메트릭 확인
2. 가장 느린 요청 확인
3. 데이터베이스 쿼리 최적화
4. 캐싱 적용 검토

### 모니터링 도구

#### 실시간 알림 (구조 완료)

현재 구조는 완료되었으며, 실제 알림 서비스 연동은 향후 추가 예정:
- 이메일 알림
- Slack/Discord 웹훅
- SMS 알림

### 로그 확인

#### 시스템 로그

서버 로그는 다음 위치에서 확인 가능:
- 개발 환경: 콘솔 출력
- 프로덕션: 로그 파일 또는 로깅 서비스

---

## API 문서

### API 문서 확인

1. `/api-docs` 페이지 접근
2. Swagger UI에서 API 확인
3. 직접 API 테스트 가능

### 주요 API 엔드포인트

- `/api/monitoring/system` - 시스템 상태
- `/api/monitoring/errors` - 에러 로그
- `/api/monitoring/performance` - 성능 메트릭
- `/api/admin/stats` - 관리자 통계
- `/api/admin/analytics` - 애널리틱스 데이터

---

## 보안

### 접근 제어

- 마스터 계정만 관리자 대시보드 접근 가능
- 모든 API는 적절한 인증/인가 필요

### 모니터링

- 비정상적인 접근 시도 모니터링
- 에러 패턴 분석
- 성능 이상 징후 감지

---

## 백업

### 데이터 백업

- 데이터베이스 정기 백업 권장
- 백업 스크립트는 `mnps/mnps-service/scripts/backup-database.js` 참고

### 백업 주기

- 프로덕션: 일일 백업 권장
- 개발: 필요시 수동 백업

---

## 업데이트 및 유지보수

### 업데이트 절차

1. 개발 환경에서 테스트
2. 백업 수행
3. 프로덕션 배포
4. 모니터링 대시보드로 상태 확인

### 유지보수 모드

- 현재 유지보수 모드 기능은 제공되지 않음
- 필요시 서버 다운타임 계획 수립

---

## 연락처

### 기술 지원

- 개발팀 문의
- 긴급 상황: 관리자에게 직접 연락

---

**버전 정보**: 1.0  
**최종 업데이트**: 2026-01-06

---

**관리자 계정으로 안전하게 시스템을 관리하세요!**

