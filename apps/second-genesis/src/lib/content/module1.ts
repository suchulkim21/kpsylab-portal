import { TextBlock, assembleParagraphs } from "./engine";
import { fullObstacleQuestions } from "../../data/questions";

interface M1Data {
    dominantType: string;
    subType: string;
    scoreMap: Record<string, number>;
}

export interface ResultItem {
    id: string;
    title: string;
    content: string;
}

const TYPE_DEFINITIONS: Record<string, string> = {
    A: "성취 지향형은 자존감의 근원을 외재적 성과와 타인의 인정에 귀속시키는 심리적 방어 기제입니다. 이 유형은 불완전함에 대한 깊은 무의식적 불안을 해소하기 위해 강박적인 성취 추구 패턴을 보이며, 휴식이나 비생산적인 시간을 자아에 대한 심각한 위협으로 인지하는 경향이 있습니다. 끊임없이 '더 높은 기준'을 요구하는 가혹한 초자아의 지배를 받습니다.",
    B: "내면 결핍형은 기질적 요인 혹은 초기 발달 과정에서의 대상 관계 결핍을 외부 대상(타인, 물질, 지위)을 통해 충족하려는 심리입니다. 만성적인 '정서적 기아' 상태를 보이며, 외부 자극으로 일시적 만족을 얻으나 근원적 결핍이 해소되지 않아 순환적인 갈망 상태에 머무르게 됩니다. 타인과의 융합을 갈망하거나 반대로 철저히 고립되는 양가적 패턴을 보입니다.",
    C: "감정 회피형은 과도한 정동 자극으로부터 자아를 보호하기 위한 억압 및 이지화 기제가 발달한 유형입니다. 고통스럽거나 압도적인 감정을 논리적으로 분석하거나 무시함으로써 심리적 평형을 유지하려 합니다. 이는 표면적인 안정감을 주지만, 결과적으로 자아와 감정의 분리를 초래하여 삶의 생동감을 앗아가고 관계의 피상성을 유발합니다.",
    D: "현실 도피형은 감당하기 어려운 현실적 압박이나 심리적 갈등 상황에서 해리적 도피를 선택하는 방어 기제입니다. 공상, 가상 세계, 혹은 특정 몰입 대상에 의존하여 자아를 고통스러운 현실로부터 격리시킵니다. 이는 단기적인 안식처를 제공하지만, 장기적으로는 문제 해결 능력을 약화시키고 현실 적응력을 심각하게 저하시키는 '회피 학습'을 강화합니다."
};

const DEEP_ANALYSIS: Record<string, string> = {
    A: "귀하의 정신 역동은 **'유능함'을 생존의 필수 조건**으로 전제하고 있습니다. 이는 과거의 경험에서 '성과 없이는 수용될 수 없다'는 핵심 신념이 형성되었음을 시사합니다. 이에 따라 내부 감시자인 초자아가 지나치게 비대해져 있어, 사소한 실책에도 과도한 자기 비판과 불안을 유발합니다. 성취는 기쁨이 아닌 '안도감'을 주는 수단으로 전락했으며, 실패에 대한 공포가 삶의 주요 동력이 되고 있습니다. 무의식 깊은 곳에는 '사랑받지 못할 것에 대한 공포'가 자리 잡고 있으며, 이를 막기 위해 완벽이라는 갑옷을 두르고 있습니다.",
    B: "내면의 공허함은 자아 정체성의 미분화 상태와 깊은 연관이 있습니다. 스스로를 충족된 온전한 주체가 아닌, **채워져야 할 결핍된 객체**로 인식합니다. 타인의 인정, 사랑, 혹은 물질적 소유를 통해서만 자신의 존재 가치를 확인하려 합니다. 그러나 외부적 충족물은 내면의 구조적 결핍을 대체할 수 없으므로, 밑 빠진 독의 비유처럼 아무리 채워도 만족되지 않는 만성적인 공허감이 지속되는 신경증적 패턴을 보이고 있습니다. 이는 유아기적 전능감의 상실과 대상 항상성의 부재에서 기인할 수 있습니다.",
    C: "감정의 억압은 역설적으로 통제 불가능한 정동 폭발이나 신체화 증상(원인 불명의 통증, 피로)을 유발할 위험을 내포합니다. **'감정을 느끼는 기능' 자체를 차단**함으로써 고통을 회피하는 전략은, 동시에 기쁨, 열정, 유대감 같은 긍정적 정서의 수용 능력까지 마비시킵니다. 분석적이고 이성적인 태도는 성숙함으로 포장되어 있으나, 실상은 상처받지 않으려는 어린 아이의 방어막일 수 있습니다. 무의식적으로 '감정은 위험하고 통제 불가능한 것'이라는 신념을 가지고 있습니다.",
    D: "회피적 대처 방식은 단기적인 불안 감소에는 탁월한 효과가 있으나, 장기적으로는 자아 효능감을 심각하게 훼손합니다. 현실 검증력이 약화됨에 따라 실제 문제는 더욱 악화되고, 커진 문제 앞에서 압도감을 느껴 다시 도피하는 **'불안-회피의 악순환'**이 형성됩니다. 안전한 환상 속에 머물수록 현실의 문턱은 점점 더 높아지며, 결국 주체적인 삶을 포기하고 방관자로 전락할 위험이 있습니다. 이는 '학습된 무기력'으로 이어질 수 있습니다."
};

const SHADOW_SELF: Record<string, string> = {
    A: "**'무능하고 초라한 아이'**\n당신이 가장 마주하기 두려워하는 내면의 그림자는, 아무런 성과도 내지 못하고 실패한 당신의 모습입니다. 이 그림자를 억압하기 위해 당신은 쉴 새 없이 달리고 있지만, 달리면 달릴수록 그림자는 더 짙게 당신을 따라다닙니다.",
    B: "**'버림받은 고아'**\n당신의 그림자는 홀로 남겨져 누구에게도 기억되지 못하는 외로운 자아입니다. 이 고립감을 피하기 위해 관계에 매달리거나 혹은 선제적으로 관계를 끊어버리지만, 이는 결국 고립을 자초하는 결과를 낳습니다.",
    C: "**'통제 불능의 광인'**\n당신은 감정이 폭발하여 이성을 잃고 무너지는 자신의 모습을 극도로 두려워합니다. 이 그림자를 가두기 위해 냉철함이라는 철창을 만들었지만, 그 안의 감정적 에너지는 언제든 폭발할 준비가 되어 있습니다.",
    D: "**'무력한 낙오자'**\n현실 적응에 실패하고 뒤처지는 것에 대한 공포가 당신의 그림자입니다. 이 현실을 직면하지 않으려 눈을 감아버리지만, 공포는 사라지지 않고 당신의 무의식을 잠식하고 있습니다."
};

const EMOTIONAL_SIGNATURE: Record<string, string> = {
    A: "**주된 정서: 불안과 조급함**\n성취 후 오는 잠깐의 안도감을 제외하면, 당신의 정서적 배경음은 항상 '여유 없음'과 '긴장'입니다. 기쁨조차도 '다음 목표'에 대한 압박으로 빠르게 변질됩니다.",
    B: "**주된 정서: 공허와 갈망**\n채워지지 않는 허기짐과 막연한 슬픔이 기저에 깔려 있습니다. 환희 뒤에 오는 급격한 허무감이 특징적이며, '온전하지 않다'는 느낌에 시달립니다.",
    C: "**주된 정서: 무감각과 냉소**\n감정의 고저가 없이 평타를 유지하려 하지만, 이는 평온이 아니라 억압된 상태입니다. 감동이나 열정을 느끼기 어려우며, 타인의 감정에 대해서도 냉소적인 태도를 보일 수 있습니다.",
    D: "**주된 정서: 막연한 두려움과 무기력**\n현실에 대한 구체적인 공포보다는, 세상 전체가 나를 압도하는 듯한 막연한 두려움을 느낍니다. 이에 대항할 힘이 없다는 무기력감이 동반됩니다."
};

const INTERPERSONAL_DYNAMICS: Record<string, string> = {
    A: "**'경쟁과 평가의 장'**\n관계를 휴식과 유대의 공간이 아니라, 자신의 가치를 증명하거나 타인을 평가하는 장으로 인식합니다. 타인의 성공을 순수하게 축하하기 어려워하며, 무의식적인 위계 질서를 설정합니다.",
    B: "**'융합과 의존'**\n경계가 모호한 관계를 맺습니다. 상대가 나의 모든 것을 알아주길 바라는 비현실적 기대를 하거나, 반대로 상대에게 헌신하며 자아를 위탁합니다.",
    C: "**'안전거리 유지'**\n친밀해질수록 불편함을 느끼고 정서적 거리를 둡니다. 깊은 속내를 털어놓지 않아 상대방으로 하여금 '벽이 있다'고 느끼게 만들며, 갈등 상황에서 회피를 선택합니다.",
    D: "**'수동적 관망'**\n관계에서도 주도적으로 나서기보다 흐름에 맡기거나 방관하는 태도를 취합니다. 갈등이나 책임이 따르는 상황에서는 존재감을 지우려 하며, 피상적인 관계에 머무릅니다."
};

const COMMUNICATION_STYLE: Record<string, string> = {
    A: "**'지시적/설득적 화법'**\n대화를 정보 교환이나 문제 해결, 혹은 자신의 의견 관철을 위한 수단으로 사용합니다. 상대의 감정에 공감하기보다 해결책을 제시하려 하며, '해야 한다'는 당위적 표현을 자주 씁니다.",
    B: "**'감정적/호소적 화법'**\n객관적 사실보다 자신의 기분이나 감정 상태를 주로 이야기합니다. 타인의 동의와 위로를 구하는 화법을 구사하며, 거절을 개인적인 거부로 받아들이는 경향이 있습니다.",
    C: "**'논리적/분석적 화법'**\n감정 단어 사용을 절제하고, 사실 관계와 인과론 위주로 이야기합니다. '내 생각에는'이라는 표현을 선호하며, 갈등 상황에서 톤이 차분해지거나 냉정해집니다.",
    D: "**'모호한/회피적 화법'**\n확답을 피하고 '글쎄요', '아마도'와 같은 유보적 표현을 자주 씁니다. 주제를 자주 바꾸거나 농담으로 상황을 넘기려 하며, 자신의 진심을 직접적으로 드러내지 않습니다."
};

const BEHAVIORAL_PATTERNS: Record<string, string[]> = {
    A: [
        "**완벽주의적 지연**: 실패 리스크가 0이 될 때까지 시작을 미루거나, 준비 과정에 과도한 에너지를 투입합니다.",
        "**휴식 죄책감**: 쉬는 시간에도 업무 관련 아티클을 읽거나 생산적인 활동을 해야 한다는 강박에 시달립니다.",
        "**비판의 내면화**: 타인의 건설적인 피드백조차 자신의 존재 전체에 대한 비난으로 받아들여 방어적으로 반응합니다.",
        "**성취 불감증**: 목표를 달성한 순간 기쁨을 만끽하기보다, '겨우 해냈다'는 안도감과 함께 즉시 다음 목표를 설정합니다.",
        "**통제 욕구**: 예측 불가능한 상황을 견디기 힘들어하며, 모든 변수를 자신의 통제 하에 두려 합니다.",
        "**비교 강박**: 끊임없이 자신을 타인과 비교하며 우월감이나 열등감 사이를 오갑니다."
    ],
    B: [
        "**관계의 양극단**: 상대를 이상화하여 헌신하다가도, 작은 실망에 상대를 평가절하하고 관계를 단절해버립니다.",
        "**보상적 소비**: 내면의 허기를 채우기 위해 음식, 물건, 알코올 등을 충동적으로 탐닉합니다.",
        "**인정 투쟁**: 자신의 고통이나 성과를 과장하여 타인의 관심과 인정을 갈구합니다.",
        "**경계 실종**: 타인의 부탁을 거절하지 못하거나, 반대로 타인의 영역을 침범하며 자신과 타인을 구분하지 못합니다.",
        "**유기 불안**: 연락이 늦거나 반응이 미적지근하면 버림받을지 모른다는 불안에 휩싸입니다.",
        "**감정 전염**: 주변 사람의 감정 상태에 지나치게 영향을 받아 자신의 기분이 널뜁니다."
    ],
    C: [
        "**수동 공격**: 불만을 직접 말하지 않고, 침묵, 지각, 연락 두절 등의 방식으로 우회적으로 표출합니다.",
        "**감정 언어 상실**: 자신의 감정을 구체적인 단어로 표현하지 못하고 '피곤하다', '답답하다' 정도의 신체 감각으로만 인지합니다.",
        "**지적 유희**: 고통스러운 문제의 본질을 직면하는 대신, 그에 대한 철학적, 이론적 탐구에 몰두합니다.",
        "**관계의 피상성**: 깊은 정서적 교류가 필요한 순간에 화제를 돌리거나 농담으로 상황을 모면합니다.",
        "**냉소적 태도**: 열정이나 순수한 감동을 유치하거나 비현실적인 것으로 치부하며 냉소합니다.",
        "**도움 거부**: 타인의 도움을 나약함의 증거로 여기며, 극도로 독립적인 태도를 고수합니다."
    ],
    D: [
        "**만성적 미루기**: 압박감이 큰 업무일수록 무의식적으로 회피하여 마감 직전까지 미룹니다.",
        "**해리적 몰입**: 현실의 문제를 잊기 위해 게임, 영상, 판타지 소설 등에 깊이 빠져들어 시간 감각을 상실합니다.",
        "**책임 전가**: 자신의 실패나 나태함을 상황, 환경, 혹은 타인의 탓으로 돌리며 합리화합니다.",
        "**수면 도피**: 스트레스 상황에서 과도하게 잠을 자거나, 깨어있는 것을 피하려 합니다.",
        "**선택 마비**: 여러 선택지 앞에서 어떤 것도 선택하지 못하고 결정을 무한정 유보합니다.",
        "**마술적 사고**: 자신이 노력하지 않아도 언젠가 외부의 힘이나 운에 의해 문제가 해결될 것이라는 막연한 기대를 갖습니다."
    ]
};

const COGNITIVE_DISTORTION: Record<string, string> = {
    A: "**'전부 아니면 전무의 사고'**\n99점은 실패와 같다고 여깁니다. 과정을 무시하고 결과만으로 가치를 판단하며, 중간 지대나 회색 지대를 인정하지 못해 스스로를 극한으로 몰아붙입니다.",
    B: "**'정서적 추론'**\n'내가 그렇게 느끼므로 그것은 사실이다'라고 믿습니다. '외롭다고 느껴지니 나는 혼자다', '불안하니 나쁜 일이 일어날 것이다'와 같이 감정을 객관적 사실과 혼동합니다.",
    C: "**'독심술의 오류'**\n충분한 근거 없이 타인의 생각을 부정적으로 단정 짓습니다. '저 사람은 나를 한심하게 볼 거야'라고 짐작하고, 이를 사실로 믿어 미리 관계를 차단합니다.",
    D: "**'재앙화'**\n발생 가능한 부정적 결과를 최악의 파국으로 부풀립니다. 작은 실수에도 '이제 다 끝장이야'라고 생각하며, 공포에 압도되어 행동을 멈춥니다."
};

const GROWTH_IMPACT: Record<string, string> = {
    A: "이러한 기제는 당신을 탁월한 성취가로 만들 수 있으나, **'영혼 없는 소모품'**으로 전락시킬 위험이 있습니다. 번아웃은 예견된 미래이며, 성취할수록 공허해지는 '성공 우울증'에 시달릴 수 있습니다. 진정한 창의성과 리더십은 강박이 아닌 심리적 여유와 수용에서 나옵니다. 당신의 엄격함은 자기 자신뿐만 아니라 주변 사람들의 숨통까지 조이고 있습니다.",
    B: "내면을 타인으로 채우려는 시도는 필연적으로 실패합니다. 타인은 당신의 구원자가 될 수 없습니다. 이대로라면 당신은 평생 **'타인의 인정에 목마른 노예'**로 살아가게 됩니다. 자기 중심이 잡히지 않은 삶은 작은 풍랑에도 쉽게 뒤집히며, 반복되는 관계의 실패는 당신을 만성적인 우울의 늪으로 끌고 갈 것입니다.",
    C: "상처받지 않기 위해 갑옷을 입었지만, 그 갑옷은 당신을 세상으로부터 격리시키는 감옥이 되었습니다. 감정을 느끼지 못한다는 것은 **'살아있음'을 포기하는 것**과 같습니다. 메마른 삶은 안전할지 모르나 생명력이 없습니다. 억압된 감정은 사라지지 않고 무의식에 쌓여, 언젠가 당신의 삶을 송두리째 흔드는 파괴적인 방식으로 분출될 것입니다.",
    D: "도피는 가장 달콤한 독입니다. 현실을 외면할수록 현실의 벽은 더 높아지고 당신은 더 작아집니다. 이대로라면 당신의 재능은 빛을 보지 못한 채 사장될 것이며, 당신은 세상 밖으로 나오지 못하는 **'은둔형 외톨이'**가 될 위험이 큽니다. 꿈속의 왕이 되느니, 현실의 평민이 되어 발을 내디뎌야 합니다."
};

const CLINICAL_RECOMMENDATION: Record<string, string[]> = {
    A: [
        "**'충분함' 훈련**: 의도적으로 업무의 완성도를 80%에서 멈추고 제출하십시오. 세상이 무너지지 않음을 확인해야 합니다.",
        "**무목적 시간 확보**: 하루 30분, 생산성 없는 활동(멍때리기, 낙서, 산책)을 의무적으로 수행하여 '존재의 가치'를 회복하십시오.",
        "**실수 축하하기**: 작은 실수를 했을 때 '그럴 수도 있지, 인간적이네'라고 소리 내어 말하며, 실수를 자기 수용의 기회로 삼으십시오.",
        "**과정 칭찬 일기**: 결과가 아닌 투입한 노력과 과정에 대해 칭찬하는 일기를 매일 쓰십시오.",
        "**'해야 한다' 줄이기**: '나는 ~해야 한다'라는 말을 '나는 ~하고 싶다' 혹은 '나는 ~을 선택한다'로 바꾸어 주체성을 회복하십시오.",
        "**휴식의 재정의**: 휴식을 '시간 낭비'가 아닌 '연료 충전'이자 '필수 업무'로 인지적 프레임을 재설정하십시오."
    ],
    B: [
        "**'고독' 훈련**: 하루 1시간, 스마트폰과 타인 없이 오롯이 혼자 있는 시간을 견디며, 고립을 고독으로 승화시키십시오.",
        "**셀프 토크**: 타인에게 듣고 싶은 위로의 말을 스스로에게 해주십시오. 거울을 보고 '오늘도 고생했어, 잘하고 있어'라고 말하십시오.",
        "**거절 목록 작성**: 일주일에 3번 이상, 내키지 않는 부탁이나 제안을 정중하게 거절하고 그 때의 감정을 기록하십시오.",
        "**감정의 주체 되기**: '너 때문에 기분이 나빠'가 아니라 '나는 그 상황에서 기분이 나빴어'라고 주어를 '나'로 바꾸어 말하십시오.",
        "**취미 독립**: 타인과 함께하지 않고 혼자서 즐기고 완성할 수 있는 취미(그림, 글쓰기, 독서 등)를 하나 만드십시오.",
        "**결핍 관찰하기**: 공허감이 밀려올 때 무언가로 채우려 하지 말고, '내가 지금 외롭구나'라고 그저 바라보며 감정의 파도가 지나가기를 기다리십시오."
    ],
    C: [
        "**신체 스캔**: 감정이 느껴지지 않을 때, 10분간 눈을 감고 발끝부터 머리까지 신체 감각에 집중하며 억압된 긴장을 찾으십시오.",
        "**감정 단어장 활용**: 하루에 느낀 감정을 '좋다/싫다'가 아닌 '섭섭하다, 억울하다, 설렌다' 등 5가지 이상의 구체적 단어로 기록하십시오.",
        "**안전한 개방**: 가장 신뢰하는 한 사람에게 당신의 약점이나 부끄러운 기억 하나를 털어놓고, 수용받는 교정적 경험을 하십시오.",
        "**예술적 투사**: 그림, 음악, 영화 등을 통해 간접적으로 감정을 느끼고 눈물을 흘리거나 감동하는 경험을 허용하십시오.",
        "**'왜' 대신 '무엇'**: '왜 이런 기분이 들지?'라고 분석하지 말고, '지금 내 안에서 무엇이 느껴지지?'라고 현상 자체에 머무르십시오.",
        "**직관적 선택**: 작은 결정(메뉴 선택 등)은 논리적 이유 없이 '그냥 끌려서' 선택하는 연습을 하십시오."
    ],
    D: [
        "**미시적 목표**: 거창한 계획 대신 '책상 닦기', '운동화 신기'처럼 실패할 수 없는 5분 단위의 목표를 세우고 실행하십시오.",
        "**5초 법칙**: 해야 할 일이 생각나면 5, 4, 3, 2, 1을 세고 생각 없이 몸을 움직여 시작하십시오.",
        "**그라운딩**: 공상에 빠질 때마다 발바닥이 땅에 닿는 느낌, 주변의 소리 3가지를 인지하여 '지금-여기'로 돌아오십시오.",
        "**타이머 활용**: '딱 10분만 하고 그만둔다'는 생각으로 타이머를 맞추고 싫어하는 일을 시작하여 진입 장벽을 낮추십시오.",
        "**환경 통제**: 도피처(게임기, 침대 등)와 작업 공간을 물리적으로 분리하고, 작업 중에는 도피 유발 요인을 차단하십시오.",
        "**현실 기록**: 매일 자신이 현실에서 실제로 수행한 일과 그 결과를 기록하여, 공상이 아닌 현실의 성취감을 축적하십시오."
    ]
};

const REPARENTING_AFFIRMATIONS: Record<string, string[]> = {
    A: [
        "나는 성취하지 않아도 존재 자체로 사랑받을 자격이 있다.",
        "실수는 실패가 아니라 성장의 과정일 뿐이다.",
        "나의 가치는 나의 생산성으로 증명되지 않는다.",
        "쉬는 시간은 나에게 주는 소중한 선물이다.",
        "나는 완벽하지 않아도 충분히 괜찮은 사람이다."
    ],
    B: [
        "나는 내 안의 결핍을 스스로 채울 수 있는 힘이 있다.",
        "혼자 있는 시간은 외로움이 아니라 온전함의 시간이다.",
        "타인의 인정 없이도 나는 나 스스로를 인정한다.",
        "나는 나를 떠나지 않으며, 언제나 나를 지지한다.",
        "나의 행복은 타인이 아닌 나의 내면에 달려 있다."
    ],
    C: [
        "감정을 느끼는 것은 약함이 아니라 인간다움의 증거다.",
        "나의 모든 감정은 타당하며, 안전하게 표현될 수 있다.",
        "머리로 생각하는 것을 멈추고 가슴으로 느낄 때 나는 자유롭다.",
        "나는 타인에게 도움을 요청해도 괜찮다.",
        "슬픔과 두려움도 내 삶의 소중한 일부이다."
    ],
    D: [
        "나는 현실의 문제를 직면하고 해결할 능력이 있다.",
        "지금 이 순간에 머무르는 것이 가장 안전한 길이다.",
        "완벽하지 않아도 괜찮으니, 일단 시작하는 것이 중요하다.",
        "나는 나의 삶을 주도적으로 이끌어가는 주인공이다.",
        "작은 실행이 모여 큰 변화를 만든다."
    ]
};

const JOURNALING_PROMPTS: Record<string, string[]> = {
    A: [
        "오늘 내가 '해야 해서' 한 일과 '하고 싶어서' 한 일은 각각 무엇인가?",
        "내가 만약 아무런 성과도 낼 수 없다면, 나는 나 자신을 어떻게 바라볼 것인가?",
        "오늘 나에게 허용한 '비생산적인 즐거움'은 무엇인가?",
        "내가 타인에게 들었던 말 중 가장 듣고 싶었던 말은 무엇인가? 그것을 나 자신에게 해줄 수 있는가?",
        "완벽해야 한다는 압박감을 내려놓았을 때 느껴지는 감정은 무엇인가?"
    ],
    B: [
        "오늘 나를 힘들게 했던 공허감은 정확히 어떤 느낌이었는가?",
        "타인의 반응에 의해 내 기분이 좌우되었던 순간은 언제인가?",
        "내가 타인에게 바랐던 위로를 나 스스로에게 해준다면 어떤 말을 해줄 수 있을까?",
        "혼자 있는 시간에 내가 느낀 부정적 감정과 긍정적 감정은 무엇인가?",
        "내가 타인에게 의존하지 않고 스스로 결정한 일은 무엇인가?"
    ],
    C: [
        "오늘 논리적인 생각 뒤에 숨겨진 진짜 감정은 무엇이었는가?",
        "내가 회피하고 싶었던 불편한 감정은 무엇이며, 그것은 신체 어디에서 느껴졌는가?",
        "오늘 하루 동안 '감정적으로' 연결되었다고 느낀 순간이 있는가?",
        "내가 타인에게 솔직하게 말하지 못하고 삼킨 말은 무엇인가?",
        "만약 감정을 있는 그대로 표현한다면 어떤 일이 일어날 것이라고 두려워하는가?"
    ],
    D: [
        "오늘 내가 현실을 모면하기 위해 선택한 도피처는 무엇인가?",
        "내가 미루고 있는 일 뒤에 숨겨진 두려움은 구체적으로 무엇인가?",
        "오늘 내가 현실에서 '작게나마' 성취한 구체적인 행동은 무엇인가?",
        "내가 꿈꾸는 이상적인 미래와 현재의 나 사이의 가장 큰 차이점은 무엇인가?",
        "지금 당장 현실로 돌아오기 위해 내가 할 수 있는 가장 쉬운 행동은 무엇인가?"
    ]
};

export function generateModule1Content(type: string): string {
    return generateSynthesizedItems(type).map(item => `**${item.title}**\n\n${item.content}`).join("\n\n");
}

export function generateSynthesizedItems(type: string): ResultItem[] {
    const t = type as keyof typeof TYPE_DEFINITIONS || "A";

    const depthBlock = {
        id: "m1_syn_depth",
        title: "[심층 진단] 무의식 구조와 그림자 자아",
        content: ([
            `**핵심 기제**: ${TYPE_DEFINITIONS[t]}`,
            `**심층 정신 역동**: ${DEEP_ANALYSIS[t]}`,
            `**그림자 자아**:\n${SHADOW_SELF[t]}`
        ].join("\n\n"))
    };

    const logicBlock = {
        id: "m1_syn_logic",
        title: "[인지 패턴] 사고 및 행동 메커니즘",
        content: ([
            `**인지적 왜곡**:\n${COGNITIVE_DISTORTION[t]}`,
            `**정서적 시그니처**:\n${EMOTIONAL_SIGNATURE[t]}`,
            `**대인 관계 역동**: \n${INTERPERSONAL_DYNAMICS[t]}`,
            `**의사소통 스타일**: \n${COMMUNICATION_STYLE[t]}`
        ].join("\n\n"))
    };

    const evidenceBlock = {
        id: "m1_syn_evidence",
        title: "[행동 프로파일] 관찰된 6가지 핵심 징후",
        content: BEHAVIORAL_PATTERNS[t].map(p => `- ${p}`).join("\n")
    };

    const prognosisBlock = {
        id: "m1_syn_prognosis",
        title: "[미래 예후] 성장 저해 요인 및 리스크",
        content: GROWTH_IMPACT[t]
    };

    const prescriptionBlock = {
        id: "m1_syn_prescription",
        title: "[임상 솔루션] 치유와 성장을 위한 파이널 제언",
        content: ([
            `**1. 임상적 실행 가이드**:\n${CLINICAL_RECOMMENDATION[t].map(i => `- ${i}`).join("\n")}`,
            `\n**2. 재양육 확언**:\n${REPARENTING_AFFIRMATIONS[t].map(i => `> "${i}"`).join("\n")}`,
            `\n**3. 성찰 질문**:\n${JOURNALING_PROMPTS[t].map((q, i) => `${i + 1}. ${q}`).join("\n")}`
        ].join("\n"))
    };

    const obstacleBlock = {
        id: "m1_syn_obstacle",
        title: "[내·외적 방해 요인] 장애물 질문",
        content: fullObstacleQuestions.map(q => `- ${q.text}`).join("\n")
    };

    return [depthBlock, logicBlock, evidenceBlock, prognosisBlock, prescriptionBlock, obstacleBlock];
}
